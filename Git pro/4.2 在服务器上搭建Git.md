
|   |   |
|---|---|
|笔记|这里我们要展示在Linux服务器上进行一次基础和简单化的安装所需的命令与步骤，当然在macOS或Windows服务器上同样可以运进行这些服务。 事实上，在你的计算机基础架构中建立一个生产环境服务器，将不可避免地避免使用到不同的安全措施与操作系统工具。但是，希望你能从本节中获得一些必要的知识。|

为了初始设置任何 Git 服务器，您必须将现有存储库导出到一个新的裸存储库——一个不包含工作目录的存储库。
为了克隆您的存储库以创建一个新的裸存储库，您可以运行带选项的克隆命令`--bare`。按照惯例，裸存储库目录名称以后缀结尾`.git`，如下所示：

```console
$ git clone --bare my_project my_project.git
Cloning into bare repository 'my_project.git'...
done.
```
您现在应该在您的目录中拥有 Git 目录数据的副本`my_project.git`。

### 将裸存储库放在服务器上

现在您有了存储库的裸副本，您需要做的就是将它放在服务器上并设置您的协议。假设您已经设置了一个名为git.example.com的服务器，您可以SSH访问该服务器，并且您希望将所有Git存储库存储在/srv/ Git目录下
假设`/srv/git`在该服务器上存在，您可以通过将裸存储库复制到以下位置来设置新存储库：
```console
$ scp -r my_project.git user@git.example.com:/srv/git
```
此时，其他对服务器上的/srv/git目录有ssh读访问权限的用户可以通过以下命令克隆你的存储库:
```console
$ git clone user@git.example.com:/srv/git/my_project.git
```
如果用户通过 SSH 连接到服务器并对`/srv/git/my_project.git`目录具有写入权限，他们也将自动具有推送权限。

如果你使用`Git init`命令和——shared选项，Git会自动为存储库添加组写权限。
注意，通过运行这个命令，您不会破坏进程中的任何提交、refs等。
```console
$ ssh user@git.example.com
$ cd /srv/git/my_project.git
$ git init --bare --shared
```

重要的是要注意，这实际上就是运行一个多人可以访问的有用 Git 服务器所需要做的一切——只需在服务器上添加支持 SSH 的帐户，然后将一个裸存储库粘贴到所有这些用户都可以读写的地方进入
如何避免为每个用户建立一个账户，给库添加公共读取消权限，设置网页界面复杂设置。

### 小型安装
如果设备比较少或者你只是想在小型开发团队里尝试 Git ，那么一切都很简单。
设置 Git 服务器最复杂的方面之一是用户管理。如果您希望某些存储库对某些用户是只读的，而对其他用户是读/写的，那么访问和权限可能会更难安排。

#### SSH 访问
如果您有一个所有开发人员都已经可以通过 SSH 访问的服务器，那么通常最容易在那里设置您的第一个存储库，因为您几乎不需要做任何工作。。如果您想要对存储库进行更复杂的访问控制类型权限，您可以使用服务器操作系统的普通文件系统权限来处理它们。

如果你想把你的存储库放在一个服务器上，而这个服务器上没有你的团队中你想授予写访问权限的每个人的帐户，那么你必须为他们设置 SSH 访问权限。

您可以通过多种方式向团队中的每个人授予访问权限。

第一个是为每个人建立账户，这很简单，但可能很麻烦。

第二种方法是在机器上创建一个单独的“git”用户帐户，要求每个具有写入权限的用户向您发送一个 SSH 公钥，并将该密钥添加到新“git”帐户的文件中`~/.ssh/authorized_keys`。

第三种方法是让您的 SSH 服务器从 LDAP 服务器或您可能已经设置的其他一些集中式身份验证源进行身份验证


